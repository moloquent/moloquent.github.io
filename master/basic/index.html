<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    
        <link rel="canonical" href="https://moloquent.github.io/master/basic/">
    
        <link rel="shortcut icon" href="../../img/favicon.ico">

    <title>Basic Usage - Moloquent</title>

    <link href="../../css/application.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

    
        <script>
            (function (i, s, o, g, r, a, m) {
                i['GoogleAnalyticsObject'] = r;
                i[r] = i[r] || function () {
                            (i[r].q = i[r].q || []).push(arguments)
                        }, i[r].l = 1 * new Date();
                a = s.createElement(o),
                        m = s.getElementsByTagName(o)[0];
                a.async = 1;
                a.src = g;
                m.parentNode.insertBefore(a, m)
            })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

            ga('create', 'UA-83645466-1', 'moloquent.github.io');
            ga('send', 'pageview');
        </script>
    
</head>

<body>

<div class="navbar navbar-default navbar-fixed-top"
     role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Main title -->
            <a class="navbar-brand" href="../">Moloquent</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
                
                    
                        <li >
                            <a href="../">Getting Started</a>
                        </li>
                    
                
                    
                        <li class="active">
                            <a href="./">Basic Usage</a>
                        </li>
                    
                
                    
                        <li >
                            <a href="../advanced/">Advanced</a>
                        </li>
                    
                
                    
                        <li >
                            <a href="../relations/">Relations</a>
                        </li>
                    
                
            </ul>

            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search Docs
                    </a>
                </li>
                
                    <li>
                        <a href="https://github.com/moloquent" target="_blank">
                            
                                <i class="fa fa-github"></i> Contribute on GitHub
                            
                        </a>
                    </li>
                
                <li class="dropdown">
                    <button class="btn dropdown-toggle btn-danger btn-version" data-toggle="dropdown">
                        Master
                        <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu" role="menu">
                        
                            <li role="presentation">
                                <a role="menuitem" tabindex="-1" href="">
                                    Master
                                </a>
                            </li>
                        
                    </ul>
                </li>
            </ul>

        </div>
    </div>
</div>

<div class="container" id="content">
    <div class="col-md-3">
            <div class="bs-sidebar hidden-print affix nano" role="complementary">
    <div class="nano-content">
        <ul class="nav bs-sidenav">
            
            <li class="main active"><a href="#eloquent">Eloquent</a></li>
            
            <li><a href="#retrieving-all-models">Retrieving All Models</a></li>
            
            <li><a href="#retrieving-by-primary-key">Retrieving By Primary Key</a></li>
            
            
            <li class="main "><a href="#inserts-updates-and-deletes">Inserts, updates and deletes</a></li>
            
            <li><a href="#saving-a-new-model">Saving a new model</a></li>
            
            <li><a href="#updating-a-model">Updating a model</a></li>
            
            <li><a href="#deleting-a-model">Deleting a model</a></li>
            
            
            <li class="main "><a href="#wheres">Wheres</a></li>
            
            <li><a href="#or-statements">Or Statements</a></li>
            
            <li><a href="#and-statements">And Statements</a></li>
            
            <li><a href="#where-in-with-an-array">Where In With An Array</a></li>
            
            <li><a href="#where-between">Where Between</a></li>
            
            <li><a href="#where-null">Where null</a></li>
            
            <li><a href="#where-like">Where Like</a></li>
            
            <li><a href="#exists">Exists</a></li>
            
            <li><a href="#all">All</a></li>
            
            <li><a href="#size">Size</a></li>
            
            <li><a href="#regex">Regex</a></li>
            
            <li><a href="#type">Type</a></li>
            
            <li><a href="#mod">Mod</a></li>
            
            <li><a href="#complex-wheres">Complex Wheres</a></li>
            
            <li><a href="#raw-where">Raw Where</a></li>
            
            
        </ul>
    </div>
</div>
    </div>
    <div class="col-md-9" role="main">

<h3 id="eloquent">Eloquent<a class="headerlink" href="#eloquent" title="Permanent link">#</a></h3>
<p>This package includes a MongoDB enabled Eloquent class that you can use to define models for corresponding collections.</p>
<pre><code class="php">use Moloquent\Eloquent\Model as Eloquent;

class User extends Eloquent {}
</code></pre>

<p>Note that we did not tell Eloquent which collection to use for the <code>User</code> model. Just like the original Eloquent, the lower-case, plural name of the class will be used as the table name unless another name is explicitly specified. You may specify a custom collection (alias for table) by defining a <code>collection</code> property on your model:</p>
<pre><code class="php">use Moloquent\Eloquent\Model as Eloquent;

class User extends Eloquent {

    protected $collection = 'users_collection';

}
</code></pre>

<p><strong>NOTE:</strong> Eloquent will also assume that each collection has a primary key column named id. You may define a <code>primaryKey</code> property to override this convention. Likewise, you may define a <code>connection</code> property to override the name of the database connection that should be used when utilizing the model.</p>
<pre><code class="php">use Moloquent\Eloquent\Model as Eloquent;

class MyModel extends Eloquent {

    protected $connection = 'mongodb';

}
</code></pre>

<p>Everything else (should) work just like the original Eloquent model. Read more about the Eloquent on http://laravel.com/docs/eloquent</p>
<h4 id="retrieving-all-models">Retrieving All Models<a class="headerlink" href="#retrieving-all-models" title="Permanent link">#</a></h4>
<pre><code class="php">$users = User::all();
</code></pre>

<h4 id="retrieving-by-primary-key">Retrieving By Primary Key<a class="headerlink" href="#retrieving-by-primary-key" title="Permanent link">#</a></h4>
<pre><code class="php">$user = User::find('517c43667db388101e00000f');
</code></pre>

<h3 id="inserts-updates-and-deletes">Inserts, updates and deletes<a class="headerlink" href="#inserts-updates-and-deletes" title="Permanent link">#</a></h3>
<p>Inserting, updating and deleting records works just like the original Eloquent.</p>
<h4 id="saving-a-new-model">Saving a new model<a class="headerlink" href="#saving-a-new-model" title="Permanent link">#</a></h4>
<pre><code class="php">$user = new User;
$user-&gt;name = 'John';
$user-&gt;save();
</code></pre>

<p>You may also use the create method to save a new model in a single line:</p>
<pre><code class="php">User::create(['name' =&gt; 'John']);
</code></pre>

<h4 id="updating-a-model">Updating a model<a class="headerlink" href="#updating-a-model" title="Permanent link">#</a></h4>
<p>To update a model, you may retrieve it, change an attribute, and use the save method.</p>
<pre><code class="php">$user = User::first();
$user-&gt;email = 'john@foo.com';
$user-&gt;save();
</code></pre>

<p><em>There is also support for upsert operations</em></p>
<h4 id="deleting-a-model">Deleting a model<a class="headerlink" href="#deleting-a-model" title="Permanent link">#</a></h4>
<p>To delete a model, simply call the delete method on the instance:</p>
<pre><code class="php">$user = User::first();
$user-&gt;delete();
</code></pre>

<p>Or deleting a model by its key:</p>
<pre><code class="php">User::destroy('517c43667db388101e00000f');
</code></pre>

<p>For more information about model manipulation, check <a href="http://laravel.com/docs/eloquent#insert-update-delete">Here</a>.</p>
<h3 id="wheres">Wheres<a class="headerlink" href="#wheres" title="Permanent link">#</a></h3>
<pre><code class="php">$users = User::where('votes', '&gt;', 100)-&gt;take(10)-&gt;get();
</code></pre>

<h4 id="or-statements">Or Statements<a class="headerlink" href="#or-statements" title="Permanent link">#</a></h4>
<pre><code class="php">$users = User::where('votes', '&gt;', 100)-&gt;orWhere('name', 'John')-&gt;get();
</code></pre>

<h4 id="and-statements">And Statements<a class="headerlink" href="#and-statements" title="Permanent link">#</a></h4>
<pre><code class="php">$users = User::where('votes', '&gt;', 100)-&gt;where('name', '=', 'John')-&gt;get();
</code></pre>

<h4 id="where-in-with-an-array">Where In With An Array<a class="headerlink" href="#where-in-with-an-array" title="Permanent link">#</a></h4>
<pre><code class="php">$users = User::whereIn('age', [16, 18, 20])-&gt;get();
</code></pre>

<p>When using <code>whereNotIn</code> objects will be returned if the field is non existent. Combine with <code>whereNotNull('age')</code> to leave out those documents.</p>
<h4 id="where-between">Where Between<a class="headerlink" href="#where-between" title="Permanent link">#</a></h4>
<pre><code class="php">$users = User::whereBetween('votes', [1, 100])-&gt;get();
</code></pre>

<h4 id="where-null">Where null<a class="headerlink" href="#where-null" title="Permanent link">#</a></h4>
<pre><code class="php">$users = User::whereNull('updated_at')-&gt;get();
</code></pre>

<h4 id="where-like">Where Like<a class="headerlink" href="#where-like" title="Permanent link">#</a></h4>
<pre><code class="php">$user = Comment::where('body', 'like', '%spam%')-&gt;get();
</code></pre>

<h4 id="exists">Exists<a class="headerlink" href="#exists" title="Permanent link">#</a></h4>
<p>Matches documents that have the specified field.</p>
<pre><code class="php">User::where('age', 'exists', true)-&gt;get();
</code></pre>

<h4 id="all">All<a class="headerlink" href="#all" title="Permanent link">#</a></h4>
<p>Matches arrays that contain all elements specified in the query.</p>
<pre><code class="php">User::where('roles', 'all', ['moderator', 'author'])-&gt;get();
</code></pre>

<h4 id="size">Size<a class="headerlink" href="#size" title="Permanent link">#</a></h4>
<p>Selects documents if the array field is a specified size.</p>
<pre><code class="php">User::where('tags', 'size', 3)-&gt;get();
</code></pre>

<h4 id="regex">Regex<a class="headerlink" href="#regex" title="Permanent link">#</a></h4>
<p>Selects documents where values match a specified regular expression.</p>
<pre><code class="php">User::where('name', 'regex', new \MongoDB\BSON\Regex(&quot;/.*doe/i&quot;))-&gt;get();
</code></pre>

<p><strong>NOTE:</strong> you can also use the Laravel regexp operations. These are a bit more flexible and will automatically convert your regular expression string to a <code>MongoDB\BSON\Regex</code> object.</p>
<pre><code class="php">User::where('name', 'regexp', '/.*doe/i'))-&gt;get();
</code></pre>

<p>And the inverse:</p>
<pre><code class="php">User::where('name', 'not regexp', '/.*doe/i'))-&gt;get();
</code></pre>

<h4 id="type">Type<a class="headerlink" href="#type" title="Permanent link">#</a></h4>
<p>Selects documents if a field is of the specified type.
For more information check <a href="http://docs.mongodb.org/manual/reference/operator/query/type/#op._S_type">Here</a>.</p>
<pre><code class="php">User::where('age', 'type', 2)-&gt;get();
</code></pre>

<h4 id="mod">Mod<a class="headerlink" href="#mod" title="Permanent link">#</a></h4>
<p>Performs a modulo operation on the value of a field and selects documents with a specified result.</p>
<pre><code class="php">User::where('age', 'mod', [10, 0])-&gt;get();
</code></pre>

<h4 id="complex-wheres">Complex Wheres<a class="headerlink" href="#complex-wheres" title="Permanent link">#</a></h4>
<pre><code class="php">$users = User::where('name', '=', 'John')-&gt;orWhere(function($query) {
        $query-&gt;where('votes', '&gt;', 100)
              -&gt;where('title', '&lt;&gt;', 'Admin');
    })
    -&gt;get();
</code></pre>

<h4 id="raw-where">Raw Where<a class="headerlink" href="#raw-where" title="Permanent link">#</a></h4>
<p>These expressions will be injected directly into the query.</p>
<pre><code class="php">User::whereRaw(['age' =&gt; ['$gt' =&gt; 30, '$lt' =&gt; 40] ])-&gt;get();
</code></pre>

<p>Matches documents that satisfy a JavaScript expression.
For more information check <a href="http://docs.mongodb.org/manual/reference/operator/query/where/#op._S_where">Here</a>.</p></div>
</div>

<footer>
    <div style="text-align: center;">
        Developed by <a href="https://github.com/jenssegers">Jenssegers</a> | Docs by <a href="https://github.com/pi0">pi0</a>
        <br>
        Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.
    </div>
</footer>

<script src="../../js/jquery-1.10.2.min.js"></script>
<script src="../../js/bootstrap-3.0.3.min.js"></script>
<script src="../../js/highlight.pack.js"></script>
<script src="../../js/jquery.nanoscroller.min.js"></script>
<script>var base_url = '../..';</script>
<script data-main="../../mkdocs/js/search.js" src="../../mkdocs/js/require.js"></script>
<script src="../../js/base.js"></script>

<div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal"
     aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span
                        class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>
</body>
</html>